"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const libsodiumModule=function(e={}){var r,t;e.ready=new Promise((function(e,_){r=e,t=_}));var _,n=e.printErr||console.warn.bind(console);"object"!=typeof WebAssembly&&k("no native wasm support detected");var o,s,a,i,u,l,c,y,d=!1,p="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function f(e,r){return e?function(e,r,t){for(var _=r+t,n=r;e[n]&&!(n>=_);)++n;if(n-r>16&&e.subarray&&p)return p.decode(e.subarray(r,n));for(var o="";r<n;){var s=e[r++];if(128&s){var a=63&e[r++];if(192!=(224&s)){var i=63&e[r++];if((s=224==(240&s)?(15&s)<<12|a<<6|i:(7&s)<<18|a<<12|i<<6|63&e[r++])<65536)o+=String.fromCharCode(s);else{var u=s-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&s)<<6|a)}else o+=String.fromCharCode(s)}return o}(a,e,r):""}function b(r){o=r,e.HEAP8=s=new Int8Array(r),e.HEAP16=i=new Int16Array(r),e.HEAP32=u=new Int32Array(r),e.HEAPU8=a=new Uint8Array(r),e.HEAPU16=new Uint16Array(r),e.HEAPU32=new Uint32Array(r),e.HEAPF32=l=new Float32Array(r),e.HEAPF64=c=new Float64Array(r)}e.INITIAL_MEMORY;var m=[],h=[],g=[];var v,A,w=0,x=null;function k(r){e.onAbort&&e.onAbort(r),n(r+=""),d=!0,r="abort("+r+"). Build with -s ASSERTIONS=1 for more info.";var _=new WebAssembly.RuntimeError(r);throw t(_),_}e.preloadedImages={},e.preloadedAudios={};var E={35180:function(){return e.getRandomValue()},35216:function(){void 0===e.getRandomValue&&(e.getRandomValue=()=>{var e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]>>>0})}};function S(r){for(;r.length>0;){var t=r.shift();if("function"!=typeof t){var _=t.func;"number"==typeof _?void 0===t.arg?y.get(_)():y.get(_)(t.arg):_(void 0===t.arg?null:t.arg)}else t(e)}}var U=[];function R(e){try{return _.grow(e-o.byteLength+65535>>>16),b(_.buffer),1}catch(e){}}var P,T={b:function(e,r,t,_){k("Assertion failed: "+f(e)+", at: "+[r?f(r):"unknown filename",t,_?f(_):"unknown function"])},c:function(){k()},a:function(e,r,t){var _=function(e,r){var t;for(U.length=0,r>>=2;t=a[e++];){var _=t<105;_&&1&r&&r++,U.push(_?c[r++>>1]:u[r]),++r}return U}(r,t);return E[e].apply(null,_)},d:function(){return 2147483648},e:function(e,r,t){a.copyWithin(e,r,r+t)},f:function(e){var r,t,_=a.length,n=2147483648;if((e>>>=0)>n)return!1;for(var o=1;o<=4;o*=2){var s=_*(1+.2/o);if(s=Math.min(s,e+100663296),R(Math.min(n,((r=Math.max(e,s))%(t=65536)>0&&(r+=t-r%t),r))))return!0}return!1}};function I(t){function _(){P||(P=!0,e.calledRun=!0,d||(S(h),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),function(){if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)r=e.postRun.shift(),g.unshift(r);var r;S(g)}()))}w>0||(!function(){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)r=e.preRun.shift(),m.unshift(r);var r;S(m)}(),w>0||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),_()}),1)):_()))}if(async function(){const r={a:T};function o(r){const t=r.exports;var n;return e.asm=t,b((_=t.g).buffer),y=t._,n=t.h,h.unshift(n),function(r){if(w--,e.monitorRunDependencies&&e.monitorRunDependencies(w),0==w&&x){var t=x;x=null,t()}}(),t}w++,e.monitorRunDependencies&&e.monitorRunDependencies(w);try{if(e.instantiateWasm)return await e.instantiateWasm(r,o);o((await WebAssembly.instantiateStreaming(fetch("sodium.wasm",{credentials:"same-origin"}),r)).instance)}catch(e){try{k(e)}catch(e){t(e)}return n("Module.instantiateWasm callback failed with error: "+e),k(e),!1}}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.h).apply(null,arguments)},e._crypto_box_publickeybytes=function(){return(e._crypto_box_publickeybytes=e.asm.i).apply(null,arguments)},e._crypto_box_secretkeybytes=function(){return(e._crypto_box_secretkeybytes=e.asm.j).apply(null,arguments)},e._crypto_box_noncebytes=function(){return(e._crypto_box_noncebytes=e.asm.k).apply(null,arguments)},e._crypto_box_macbytes=function(){return(e._crypto_box_macbytes=e.asm.l).apply(null,arguments)},e._crypto_box_easy=function(){return(e._crypto_box_easy=e.asm.m).apply(null,arguments)},e._crypto_box_open_easy=function(){return(e._crypto_box_open_easy=e.asm.n).apply(null,arguments)},e._crypto_scalarmult_scalarbytes=function(){return(e._crypto_scalarmult_scalarbytes=e.asm.o).apply(null,arguments)},e._crypto_secretbox_keybytes=function(){return(e._crypto_secretbox_keybytes=e.asm.p).apply(null,arguments)},e._crypto_secretbox_noncebytes=function(){return(e._crypto_secretbox_noncebytes=e.asm.q).apply(null,arguments)},e._crypto_secretbox_macbytes=function(){return(e._crypto_secretbox_macbytes=e.asm.r).apply(null,arguments)},e._crypto_secretbox_easy=function(){return(e._crypto_secretbox_easy=e.asm.s).apply(null,arguments)},e._crypto_secretbox_open_easy=function(){return(e._crypto_secretbox_open_easy=e.asm.t).apply(null,arguments)},e._crypto_sign_statebytes=function(){return(e._crypto_sign_statebytes=e.asm.u).apply(null,arguments)},e._crypto_sign_bytes=function(){return(e._crypto_sign_bytes=e.asm.v).apply(null,arguments)},e._crypto_sign_seedbytes=function(){return(e._crypto_sign_seedbytes=e.asm.w).apply(null,arguments)},e._crypto_sign_publickeybytes=function(){return(e._crypto_sign_publickeybytes=e.asm.x).apply(null,arguments)},e._crypto_sign_secretkeybytes=function(){return(e._crypto_sign_secretkeybytes=e.asm.y).apply(null,arguments)},e._crypto_sign_messagebytes_max=function(){return(e._crypto_sign_messagebytes_max=e.asm.z).apply(null,arguments)},e._crypto_sign_seed_keypair=function(){return(e._crypto_sign_seed_keypair=e.asm.A).apply(null,arguments)},e._crypto_sign_keypair=function(){return(e._crypto_sign_keypair=e.asm.B).apply(null,arguments)},e._crypto_sign=function(){return(e._crypto_sign=e.asm.C).apply(null,arguments)},e._crypto_sign_open=function(){return(e._crypto_sign_open=e.asm.D).apply(null,arguments)},e._crypto_sign_detached=function(){return(e._crypto_sign_detached=e.asm.E).apply(null,arguments)},e._crypto_sign_verify_detached=function(){return(e._crypto_sign_verify_detached=e.asm.F).apply(null,arguments)},e._crypto_sign_init=function(){return(e._crypto_sign_init=e.asm.G).apply(null,arguments)},e._crypto_sign_update=function(){return(e._crypto_sign_update=e.asm.H).apply(null,arguments)},e._crypto_sign_final_create=function(){return(e._crypto_sign_final_create=e.asm.I).apply(null,arguments)},e._crypto_sign_final_verify=function(){return(e._crypto_sign_final_verify=e.asm.J).apply(null,arguments)},e._crypto_sign_ed25519_pk_to_curve25519=function(){return(e._crypto_sign_ed25519_pk_to_curve25519=e.asm.K).apply(null,arguments)},e._crypto_sign_ed25519_sk_to_curve25519=function(){return(e._crypto_sign_ed25519_sk_to_curve25519=e.asm.L).apply(null,arguments)},e._randombytes_random=function(){return(e._randombytes_random=e.asm.M).apply(null,arguments)},e._randombytes_stir=function(){return(e._randombytes_stir=e.asm.N).apply(null,arguments)},e._randombytes_uniform=function(){return(e._randombytes_uniform=e.asm.O).apply(null,arguments)},e._randombytes_buf=function(){return(e._randombytes_buf=e.asm.P).apply(null,arguments)},e._randombytes_buf_deterministic=function(){return(e._randombytes_buf_deterministic=e.asm.Q).apply(null,arguments)},e._randombytes_seedbytes=function(){return(e._randombytes_seedbytes=e.asm.R).apply(null,arguments)},e._randombytes_close=function(){return(e._randombytes_close=e.asm.S).apply(null,arguments)},e._randombytes=function(){return(e._randombytes=e.asm.T).apply(null,arguments)},e._sodium_bin2hex=function(){return(e._sodium_bin2hex=e.asm.U).apply(null,arguments)},e._sodium_hex2bin=function(){return(e._sodium_hex2bin=e.asm.V).apply(null,arguments)},e._sodium_base64_encoded_len=function(){return(e._sodium_base64_encoded_len=e.asm.W).apply(null,arguments)},e._sodium_bin2base64=function(){return(e._sodium_bin2base64=e.asm.X).apply(null,arguments)},e._sodium_base642bin=function(){return(e._sodium_base642bin=e.asm.Y).apply(null,arguments)},e._sodium_init=function(){return(e._sodium_init=e.asm.Z).apply(null,arguments)},e._sodium_pad=function(){return(e._sodium_pad=e.asm._).apply(null,arguments)},e._sodium_unpad=function(){return(e._sodium_unpad=e.asm.$).apply(null,arguments)},e._sodium_version_string=function(){return(e._sodium_version_string=e.asm.aa).apply(null,arguments)},e._sodium_library_version_major=function(){return(e._sodium_library_version_major=e.asm.ba).apply(null,arguments)},e._sodium_library_version_minor=function(){return(e._sodium_library_version_minor=e.asm.ca).apply(null,arguments)},e._sodium_library_minimal=function(){return(e._sodium_library_minimal=e.asm.da).apply(null,arguments)},e._malloc=function(){return(e._malloc=e.asm.ea).apply(null,arguments)},e._free=function(){return(e._free=e.asm.fa).apply(null,arguments)},e.setValue=function(e,r,t,_){switch("*"===(t=t||"i8").charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":s[e>>0]=r;break;case"i16":i[e>>1]=r;break;case"i32":u[e>>2]=r;break;case"i64":A=[r>>>0,(v=r,+Math.abs(v)>=1?v>0?(0|Math.min(+Math.floor(v/4294967296),4294967295))>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],u[e>>2]=A[0],u[e+4>>2]=A[1];break;case"float":l[e>>2]=r;break;case"double":c[e>>3]=r;break;default:k("invalid type for setValue: "+t)}},e.getValue=function(e,r,t){switch("*"===(r=r||"i8").charAt(r.length-1)&&(r="i32"),r){case"i1":case"i8":return s[e>>0];case"i16":return i[e>>1];case"i32":case"i64":return u[e>>2];case"float":return l[e>>2];case"double":return c[e>>3];default:k("invalid type for getValue: "+r)}return null},e.UTF8ToString=f,x=function e(){P||I(),P||(x=e)},e.run=I,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return I(),e.ready},libsodium={},output_format="uint8array";let _installRes;const install=e=>_installRes||(_installRes=_install(e)),_install=async e=>{e&&(libsodium.instantiateWasm=e.instantiateWasm,e.getRandomValue&&(libsodium.getRandomValue=e.getRandomValue)),libsodiumModule(libsodium),await libsodium.ready;try{if(0!==libsodium._sodium_init())throw new Error("libsodium was not correctly initialized.");const r=new Uint8Array([98,97,108,108,115]),t=randombytes_buf(CONSTANTS.crypto_secretbox_NONCEBYTES),_=randombytes_buf(CONSTANTS.crypto_secretbox_KEYBYTES),n=crypto_secretbox_easy(r,t,_);if(memcmp(r,crypto_secretbox_open_easy(n,t,_)))return e}catch(e){throw console.log(e),new Error("./libsodium.js wasm failed to load"+e)}};function memcmp(e,r){if(!(e instanceof Uint8Array&&r instanceof Uint8Array))throw new TypeError("Only Uint8Array instances can be compared");if(e.length!==r.length)throw new TypeError("Only instances of identical length can be compared");for(var t=0,_=0,n=e.length;_<n;_++)t|=e[_]^r[_];return 0===t}const dec=new TextEncoder,from_string=dec.encode.bind(dec),enc=new TextDecoder("utf-8",{fatal:!0}),to_string=enc.decode.bind(enc);function from_hex(e){const r=new AddressPool,t=_any_to_Uint8Array(r,e,"input"),_=new AllocatedBuf(t.length/2),n=_to_allocated_buf_address(t),o=_malloc(4);r.push(n),r.push(_.address),r.push(o),0!==libsodium._sodium_hex2bin(_.address,_.length,n,t.length,0,0,o)&&_free_and_throw_error(r,"invalid input");libsodium.getValue(o,"i32")-n!==t.length&&_free_and_throw_error(r,"incomplete input");const s=_.to_Uint8Array();return _free_all(r),s}function to_hex(e){e=_any_to_Uint8Array(null,e,"input");for(var r,t,_,n="",o=0;o<e.length;o++)_=87+(t=15&e[o])+(t-10>>8&-39)<<8|87+(r=e[o]>>>4)+(r-10>>8&-39),n+=String.fromCharCode(255&_)+String.fromCharCode(_>>>8);return n}function check_base64_variant(e){if(null==e)return exports.base64_variants.URLSAFE_NO_PADDING;if(e!==exports.base64_variants.ORIGINAL&&e!==exports.base64_variants.ORIGINAL_NO_PADDING&&e!==exports.base64_variants.URLSAFE&&e!=exports.base64_variants.URLSAFE_NO_PADDING)throw new Error("unsupported base64 variant");return e}function from_base64(e,r){r=check_base64_variant(r);const t=new AddressPool,_=_any_to_Uint8Array(t,e,"input"),n=new AllocatedBuf(3*_.length/4),o=_to_allocated_buf_address(_),s=_malloc(4),a=_malloc(4);t.push(o),t.push(n.address),t.push(s),t.push(a),0!==libsodium._sodium_base642bin(n.address,n.length,o,_.length,0,s,a,r)&&_free_and_throw_error(t,"invalid input");libsodium.getValue(a,"i32")-o!==_.length&&_free_and_throw_error(t,"incomplete input"),n.length=libsodium.getValue(s,"i32");const i=n.to_Uint8Array();return _free_all(t),i}function to_base64(e,r){r=check_base64_variant(r);const t=new AddressPool;e=_any_to_Uint8Array(t,e,"input");const _=0|Math.floor(e.length/3),n=e.length-3*_,o=4*_+(0!==n?0==(2&r)?4:2+(n>>>1):0),s=new AllocatedBuf(o+1),a=_to_allocated_buf_address(e);t.push(a),t.push(s.address),0===libsodium._sodium_bin2base64(s.address,s.length,a,e.length,r)&&_free_and_throw_error(t,"conversion failed"),s.length=o;const i=to_string(s.to_Uint8Array());return _free_all(t),i}exports.base64_variants=void 0,function(e){e[e.ORIGINAL=1]="ORIGINAL",e[e.ORIGINAL_NO_PADDING=3]="ORIGINAL_NO_PADDING",e[e.URLSAFE=5]="URLSAFE",e[e.URLSAFE_NO_PADDING=7]="URLSAFE_NO_PADDING"}(exports.base64_variants||(exports.base64_variants={}));const output_formats=Object.freeze(["uint8array","text","hex","base64"]);function _format_output(e,r){var t=r||"uint8array";if(!_is_output_format(t))throw new Error(t+" output format is not available");if(e instanceof AllocatedBuf){if("uint8array"===t)return e.to_Uint8Array();if("text"===t)return to_string(e.to_Uint8Array());if("hex"===t)return to_hex(e.to_Uint8Array());if("base64"===t)return to_base64(e.to_Uint8Array(),exports.base64_variants.URLSAFE_NO_PADDING);throw new Error('What is output format "'+t+'"?')}throw new TypeError("Cannot format output")}function _is_output_format(e){return output_formats.includes(e)}function _check_output_format(e){if(e){if("string"!=typeof e)throw new TypeError("When defined, the output format must be a string");if(!_is_output_format(e))throw new Error(e+" is not a supported output format")}}class AllocatedBuf{constructor(e){this.length=e,this.address=_malloc(e)}to_Uint8Array(){var e=new Uint8Array(this.length);return e.set(libsodium.HEAPU8.subarray(this.address,this.address+this.length)),e}}class AddressPool extends Array{push(e){return this[this.length]=e}}function _to_allocated_buf_address(e){var r=_malloc(e.length);return libsodium.HEAPU8.set(e,r),r}function _malloc(e){var r=libsodium._malloc(e);if(0===r)throw{message:"_malloc() failed",length:e};return r}function _free(e){libsodium._free(e)}function _free_all(e){if(e)for(var r=0;r<e.length;r++)_free(e[r])}function _free_and_throw_error(e,r){throw _free_all(e),new Error(r)}function _free_and_throw_type_error(e,r){throw _free_all(e),new TypeError(r)}function _require_defined(e,r,t){null==r&&_free_and_throw_type_error(e,t+" cannot be null or undefined")}function _any_to_Uint8Array(e,r,t){return _require_defined(e,r,t),r instanceof Uint8Array?r:"string"==typeof r?from_string(r):void _free_and_throw_type_error(e,"unsupported input type for "+t)}const _cacheDefineConstantsProp=(e,r)=>{Object.defineProperty(CONSTANTS,e,{value:r,writable:!1,configurable:!0,enumerable:!0})},CONSTANTS={get SODIUM_LIBRARY_VERSION_MAJOR(){const e=libsodium._sodium_library_version_major();return _cacheDefineConstantsProp("SODIUM_LIBRARY_VERSION_MAJOR",e),e},get SODIUM_LIBRARY_VERSION_MINOR(){const e=libsodium._sodium_library_version_minor();return _cacheDefineConstantsProp("SODIUM_LIBRARY_VERSION_MINOR",e),e},get SODIUM_VERSION_STRING(){const e=libsodium._sodium_version_string();return _cacheDefineConstantsProp("SODIUM_VERSION_STRING",e),e},get crypto_box_MACBYTES(){const e=libsodium._crypto_box_macbytes();return _cacheDefineConstantsProp("crypto_box_MACBYTES",e),e},get crypto_box_NONCEBYTES(){const e=libsodium._crypto_box_noncebytes();return _cacheDefineConstantsProp("crypto_box_NONCEBYTES",e),e},get crypto_box_PUBLICKEYBYTES(){const e=libsodium._crypto_box_publickeybytes();return _cacheDefineConstantsProp("crypto_box_PUBLICKEYBYTES",e),e},get crypto_box_SECRETKEYBYTES(){const e=libsodium._crypto_box_secretkeybytes();return _cacheDefineConstantsProp("crypto_box_SECRETKEYBYTES",e),e},get crypto_scalarmult_SCALARBYTES(){const e=libsodium._crypto_scalarmult_scalarbytes();return _cacheDefineConstantsProp("crypto_scalarmult_SCALARBYTES",e),e},get crypto_secretbox_KEYBYTES(){const e=libsodium._crypto_secretbox_keybytes();return _cacheDefineConstantsProp("crypto_secretbox_KEYBYTES",e),e},get crypto_secretbox_MACBYTES(){const e=libsodium._crypto_secretbox_macbytes();return _cacheDefineConstantsProp("crypto_secretbox_MACBYTES",e),e},get crypto_secretbox_NONCEBYTES(){const e=libsodium._crypto_secretbox_noncebytes();return _cacheDefineConstantsProp("crypto_secretbox_NONCEBYTES",e),e},get crypto_sign_BYTES(){const e=libsodium._crypto_sign_bytes();return _cacheDefineConstantsProp("crypto_sign_BYTES",e),e},get crypto_sign_MESSAGEBYTES_MAX(){const e=libsodium._crypto_sign_messagebytes_max();return _cacheDefineConstantsProp("crypto_sign_MESSAGEBYTES_MAX",e),e},get crypto_sign_PUBLICKEYBYTES(){const e=libsodium._crypto_sign_publickeybytes();return _cacheDefineConstantsProp("crypto_sign_PUBLICKEYBYTES",e),e},get crypto_sign_SECRETKEYBYTES(){const e=libsodium._crypto_sign_secretkeybytes();return _cacheDefineConstantsProp("crypto_sign_SECRETKEYBYTES",e),e},get crypto_sign_SEEDBYTES(){const e=libsodium._crypto_sign_seedbytes();return _cacheDefineConstantsProp("crypto_sign_SEEDBYTES",e),e}},crypto_box_easy=(e,r,t,_,n="uint8array")=>{const o=new AddressPool;_check_output_format(n);var s=_to_allocated_buf_address(e=_any_to_Uint8Array(o,e,"message")),a=e.length;o.push(s),r=_any_to_Uint8Array(o,r,"nonce");var i,u=0|libsodium._crypto_box_noncebytes();r.length!==u&&_free_and_throw_type_error(o,"invalid nonce length"),i=_to_allocated_buf_address(r),o.push(i),t=_any_to_Uint8Array(o,t,"publicKey");var l,c=0|libsodium._crypto_box_publickeybytes();t.length!==c&&_free_and_throw_type_error(o,"invalid publicKey length"),l=_to_allocated_buf_address(t),o.push(l),_=_any_to_Uint8Array(o,_,"privateKey");var y,d=0|libsodium._crypto_box_secretkeybytes();_.length!==d&&_free_and_throw_type_error(o,"invalid privateKey length"),y=_to_allocated_buf_address(_),o.push(y);var p=a+libsodium._crypto_box_macbytes()|0,f=new AllocatedBuf(p),b=f.address;if(o.push(b),0==(0|libsodium._crypto_box_easy(b,s,a,0,i,l,y))){var m=_format_output(f,n);return _free_all(o),m}_free_and_throw_error(o,"invalid usage")},crypto_box_open_easy=(e,r,t,_,n="uint8array")=>{const o=new AddressPool;_check_output_format(n),e=_any_to_Uint8Array(o,e,"ciphertext");var s,a=libsodium._crypto_box_macbytes(),i=e.length;i<a&&_free_and_throw_type_error(o,"ciphertext is too short"),s=_to_allocated_buf_address(e),o.push(s),r=_any_to_Uint8Array(o,r,"nonce");var u,l=0|libsodium._crypto_box_noncebytes();r.length!==l&&_free_and_throw_type_error(o,"invalid nonce length"),u=_to_allocated_buf_address(r),o.push(u),t=_any_to_Uint8Array(o,t,"publicKey");var c,y=0|libsodium._crypto_box_publickeybytes();t.length!==y&&_free_and_throw_type_error(o,"invalid publicKey length"),c=_to_allocated_buf_address(t),o.push(c),_=_any_to_Uint8Array(o,_,"privateKey");var d,p=0|libsodium._crypto_box_secretkeybytes();_.length!==p&&_free_and_throw_type_error(o,"invalid privateKey length"),d=_to_allocated_buf_address(_),o.push(d);var f=i-libsodium._crypto_box_macbytes()|0,b=new AllocatedBuf(f),m=b.address;if(o.push(m),0==(0|libsodium._crypto_box_open_easy(m,s,i,0,u,c,d))){var h=_format_output(b,n);return _free_all(o),h}_free_and_throw_error(o,"incorrect key pair for the given ciphertext")},crypto_secretbox_easy=(e,r,t,_="uint8array")=>{const n=new AddressPool;_check_output_format(_);var o=_to_allocated_buf_address(e=_any_to_Uint8Array(n,e,"message")),s=e.length;n.push(o),r=_any_to_Uint8Array(n,r,"nonce");var a,i=0|libsodium._crypto_secretbox_noncebytes();r.length!==i&&_free_and_throw_type_error(n,"invalid nonce length"),a=_to_allocated_buf_address(r),n.push(a),t=_any_to_Uint8Array(n,t,"key");var u,l=0|libsodium._crypto_secretbox_keybytes();t.length!==l&&_free_and_throw_type_error(n,"invalid key length"),u=_to_allocated_buf_address(t),n.push(u);var c=s+libsodium._crypto_secretbox_macbytes()|0,y=new AllocatedBuf(c),d=y.address;if(n.push(d),0==(0|libsodium._crypto_secretbox_easy(d,o,s,0,a,u))){var p=_format_output(y,_);return _free_all(n),p}_free_and_throw_error(n,"invalid usage")},crypto_secretbox_open_easy=(e,r,t,_="uint8array")=>{const n=new AddressPool;_check_output_format(_),e=_any_to_Uint8Array(n,e,"ciphertext");var o,s=libsodium._crypto_secretbox_macbytes(),a=e.length;a<s&&_free_and_throw_type_error(n,"ciphertext is too short"),o=_to_allocated_buf_address(e),n.push(o),r=_any_to_Uint8Array(n,r,"nonce");var i,u=0|libsodium._crypto_secretbox_noncebytes();r.length!==u&&_free_and_throw_type_error(n,"invalid nonce length"),i=_to_allocated_buf_address(r),n.push(i),t=_any_to_Uint8Array(n,t,"key");var l,c=0|libsodium._crypto_secretbox_keybytes();t.length!==c&&_free_and_throw_type_error(n,"invalid key length"),l=_to_allocated_buf_address(t),n.push(l);var y=a-libsodium._crypto_secretbox_macbytes()|0,d=new AllocatedBuf(y),p=d.address;if(n.push(p),0==(0|libsodium._crypto_secretbox_open_easy(p,o,a,0,i,l))){var f=_format_output(d,_);return _free_all(n),f}_free_and_throw_error(n,"wrong secret key for the given ciphertext")},crypto_sign=(e,r,t="uint8array")=>{const _=new AddressPool;_check_output_format(t);var n=_to_allocated_buf_address(e=_any_to_Uint8Array(_,e,"message")),o=e.length;_.push(n),r=_any_to_Uint8Array(_,r,"privateKey");var s,a=0|libsodium._crypto_sign_secretkeybytes();r.length!==a&&_free_and_throw_type_error(_,"invalid privateKey length"),s=_to_allocated_buf_address(r),_.push(s);var i=e.length+libsodium._crypto_sign_bytes()|0,u=new AllocatedBuf(i),l=u.address;if(_.push(l),0==(0|libsodium._crypto_sign(l,null,n,o,0,s))){var c=_format_output(u,t);return _free_all(_),c}_free_and_throw_error(_,"invalid usage")},crypto_sign_detached=(e,r,t="uint8array")=>{const _=new AddressPool;_check_output_format(t);var n=_to_allocated_buf_address(e=_any_to_Uint8Array(_,e,"message")),o=e.length;_.push(n),r=_any_to_Uint8Array(_,r,"privateKey");var s,a=0|libsodium._crypto_sign_secretkeybytes();r.length!==a&&_free_and_throw_type_error(_,"invalid privateKey length"),s=_to_allocated_buf_address(r),_.push(s);var i=0|libsodium._crypto_sign_bytes(),u=new AllocatedBuf(i),l=u.address;if(_.push(l),0==(0|libsodium._crypto_sign_detached(l,null,n,o,0,s))){var c=_format_output(u,t);return _free_all(_),c}_free_and_throw_error(_,"invalid usage")},crypto_sign_ed25519_pk_to_curve25519=(e,r="uint8array")=>{const t=new AddressPool;_check_output_format(r),e=_any_to_Uint8Array(t,e,"edPk");var _,n=0|libsodium._crypto_sign_publickeybytes();e.length!==n&&_free_and_throw_type_error(t,"invalid edPk length"),_=_to_allocated_buf_address(e),t.push(_);var o=0|libsodium._crypto_scalarmult_scalarbytes(),s=new AllocatedBuf(o),a=s.address;if(t.push(a),0==(0|libsodium._crypto_sign_ed25519_pk_to_curve25519(a,_))){var i=_format_output(s,r);return _free_all(t),i}_free_and_throw_error(t,"invalid key")},crypto_sign_ed25519_sk_to_curve25519=(e,r="uint8array")=>{const t=new AddressPool;_check_output_format(r),e=_any_to_Uint8Array(t,e,"edSk");var _,n=0|libsodium._crypto_sign_secretkeybytes();e.length!==n&&_free_and_throw_type_error(t,"invalid edSk length"),_=_to_allocated_buf_address(e),t.push(_);var o=0|libsodium._crypto_scalarmult_scalarbytes(),s=new AllocatedBuf(o),a=s.address;if(t.push(a),0==(0|libsodium._crypto_sign_ed25519_sk_to_curve25519(a,_))){var i=_format_output(s,r);return _free_all(t),i}_free_and_throw_error(t,"invalid key")},crypto_sign_final_create=(e,r,t="uint8array")=>{const _=new AddressPool;_check_output_format(t),_require_defined(_,e,"state_address"),r=_any_to_Uint8Array(_,r,"privateKey");var n,o=0|libsodium._crypto_sign_secretkeybytes();r.length!==o&&_free_and_throw_type_error(_,"invalid privateKey length"),n=_to_allocated_buf_address(r),_.push(n);var s=0|libsodium._crypto_sign_bytes(),a=new AllocatedBuf(s),i=a.address;if(_.push(i),0==(0|libsodium._crypto_sign_final_create(e,i,null,n))){var u=(libsodium._free(e),_format_output(a,t));return _free_all(_),u}_free_and_throw_error(_,"invalid usage")},crypto_sign_final_verify=(e,r,t,_="uint8array")=>{const n=new AddressPool;_check_output_format(_),_require_defined(n,e,"state_address"),r=_any_to_Uint8Array(n,r,"signature");var o,s=0|libsodium._crypto_sign_bytes();r.length!==s&&_free_and_throw_type_error(n,"invalid signature length"),o=_to_allocated_buf_address(r),n.push(o),t=_any_to_Uint8Array(n,t,"publicKey");var a,i=0|libsodium._crypto_sign_publickeybytes();t.length!==i&&_free_and_throw_type_error(n,"invalid publicKey length"),a=_to_allocated_buf_address(t),n.push(a);var u=0===(0|libsodium._crypto_sign_final_verify(e,o,a));return _free_all(n),u},crypto_sign_init=(e="uint8array")=>{const r=new AddressPool;_check_output_format(e);var t=new AllocatedBuf(208).address;if(0==(0|libsodium._crypto_sign_init(t))){var _=t;return _free_all(r),_}_free_and_throw_error(r,"internal error")},crypto_sign_keypair=(e="uint8array")=>{const r=new AddressPool;_check_output_format(e);var t=0|libsodium._crypto_sign_publickeybytes(),_=new AllocatedBuf(t),n=_.address;r.push(n);var o=0|libsodium._crypto_sign_secretkeybytes(),s=new AllocatedBuf(o),a=s.address;if(r.push(a),0==(0|libsodium._crypto_sign_keypair(n,a))){var i={publicKey:_format_output(_,e),privateKey:_format_output(s,e),keyType:"ed25519"};return _free_all(r),i}_free_and_throw_error(r,"internal error")},crypto_sign_open=(e,r,t="uint8array")=>{const _=new AddressPool;_check_output_format(t),e=_any_to_Uint8Array(_,e,"signedMessage");var n,o=libsodium._crypto_sign_bytes(),s=e.length;s<o&&_free_and_throw_type_error(_,"signedMessage is too short"),n=_to_allocated_buf_address(e),_.push(n),r=_any_to_Uint8Array(_,r,"publicKey");var a,i=0|libsodium._crypto_sign_publickeybytes();r.length!==i&&_free_and_throw_type_error(_,"invalid publicKey length"),a=_to_allocated_buf_address(r),_.push(a);var u=s-libsodium._crypto_sign_bytes()|0,l=new AllocatedBuf(u),c=l.address;if(_.push(c),0==(0|libsodium._crypto_sign_open(c,null,n,s,0,a))){var y=_format_output(l,t);return _free_all(_),y}_free_and_throw_error(_,"incorrect signature for the given public key")},crypto_sign_seed_keypair=(e,r="uint8array")=>{const t=new AddressPool;_check_output_format(r),e=_any_to_Uint8Array(t,e,"seed");var _,n=0|libsodium._crypto_sign_seedbytes();e.length!==n&&_free_and_throw_type_error(t,"invalid seed length"),_=_to_allocated_buf_address(e),t.push(_);var o=0|libsodium._crypto_sign_publickeybytes(),s=new AllocatedBuf(o),a=s.address;t.push(a);var i=0|libsodium._crypto_sign_secretkeybytes(),u=new AllocatedBuf(i),l=u.address;if(t.push(l),0==(0|libsodium._crypto_sign_seed_keypair(a,l,_))){var c={publicKey:_format_output(s,r),privateKey:_format_output(u,r),keyType:"ed25519"};return _free_all(t),c}_free_and_throw_error(t,"invalid usage")},crypto_sign_update=(e,r,t="uint8array")=>{const _=new AddressPool;_check_output_format(t),_require_defined(_,e,"state_address");var n=_to_allocated_buf_address(r=_any_to_Uint8Array(_,r,"message_chunk")),o=r.length;_.push(n),0!=(0|libsodium._crypto_sign_update(e,n,o,0))&&_free_and_throw_error(_,"invalid usage"),_free_all(_)},crypto_sign_verify_detached=(e,r,t)=>{const _=new AddressPool;e=_any_to_Uint8Array(_,e,"signature");var n,o=0|libsodium._crypto_sign_bytes();e.length!==o&&_free_and_throw_type_error(_,"invalid signature length"),n=_to_allocated_buf_address(e),_.push(n);var s=_to_allocated_buf_address(r=_any_to_Uint8Array(_,r,"message")),a=r.length;_.push(s),t=_any_to_Uint8Array(_,t,"publicKey");var i,u=0|libsodium._crypto_sign_publickeybytes();t.length!==u&&_free_and_throw_type_error(_,"invalid publicKey length"),i=_to_allocated_buf_address(t),_.push(i);var l=0===(0|libsodium._crypto_sign_verify_detached(n,s,a,0,i));return _free_all(_),l},randombytes_buf=(e,r="uint8array")=>{const t=new AddressPool;_check_output_format(r),_require_defined(t,e,"length"),("number"!=typeof e||(0|e)!==e||e<0)&&_free_and_throw_type_error(t,"length must be an unsigned integer");var _=new AllocatedBuf(0|e),n=_.address;t.push(n),libsodium._randombytes_buf(n,e);var o=_format_output(_,r);return _free_all(t),o},randombytes_buf_deterministic=(e,r,t="uint8array")=>{const _=new AddressPool;_check_output_format(t),_require_defined(_,e,"length"),("number"!=typeof e||(0|e)!==e||e<0)&&_free_and_throw_type_error(_,"length must be an unsigned integer"),r=_any_to_Uint8Array(_,r,"seed");var n,o=0|libsodium._randombytes_seedbytes();r.length!==o&&_free_and_throw_type_error(_,"invalid seed length"),n=_to_allocated_buf_address(r),_.push(n);var s=new AllocatedBuf(0|e),a=s.address;_.push(a),libsodium._randombytes_buf_deterministic(a,e,n);var i=_format_output(s,t);return _free_all(_),i},randombytes_close=(e="uint8array")=>{new AddressPool,_check_output_format(e),libsodium._randombytes_close()},randombytes_random=(e="uint8array")=>{const r=new AddressPool;_check_output_format(e);var t=libsodium._randombytes_random()>>>0;return _free_all(r),t},randombytes_stir=(e="uint8array")=>{new AddressPool,_check_output_format(e),libsodium._randombytes_stir()},randombytes_uniform=(e,r="uint8array")=>{const t=new AddressPool;_check_output_format(r),_require_defined(t,e,"upper_bound"),("number"!=typeof e||(0|e)!==e||e<0)&&_free_and_throw_type_error(t,"upper_bound must be an unsigned integer");var _=libsodium._randombytes_uniform(e)>>>0;return _free_all(t),_},sodium_version_string=()=>{const e=new AddressPool;var r=libsodium._sodium_version_string(),t=libsodium.UTF8ToString(r);return _free_all(e),t};exports.CONSTANTS=CONSTANTS,exports.crypto_box_easy=crypto_box_easy,exports.crypto_box_open_easy=crypto_box_open_easy,exports.crypto_secretbox_easy=crypto_secretbox_easy,exports.crypto_secretbox_open_easy=crypto_secretbox_open_easy,exports.crypto_sign=crypto_sign,exports.crypto_sign_detached=crypto_sign_detached,exports.crypto_sign_ed25519_pk_to_curve25519=crypto_sign_ed25519_pk_to_curve25519,exports.crypto_sign_ed25519_sk_to_curve25519=crypto_sign_ed25519_sk_to_curve25519,exports.crypto_sign_final_create=crypto_sign_final_create,exports.crypto_sign_final_verify=crypto_sign_final_verify,exports.crypto_sign_init=crypto_sign_init,exports.crypto_sign_keypair=crypto_sign_keypair,exports.crypto_sign_open=crypto_sign_open,exports.crypto_sign_seed_keypair=crypto_sign_seed_keypair,exports.crypto_sign_update=crypto_sign_update,exports.crypto_sign_verify_detached=crypto_sign_verify_detached,exports.from_base64=from_base64,exports.from_hex=from_hex,exports.from_string=from_string,exports.install=install,exports.libsodium=libsodium,exports.output_formats=output_formats,exports.randombytes_buf=randombytes_buf,exports.randombytes_buf_deterministic=randombytes_buf_deterministic,exports.randombytes_close=randombytes_close,exports.randombytes_random=randombytes_random,exports.randombytes_stir=randombytes_stir,exports.randombytes_uniform=randombytes_uniform,exports.sodium_version_string=sodium_version_string,exports.to_base64=to_base64,exports.to_hex=to_hex,exports.to_string=to_string;
